!function(t){"function"==typeof define&&define.amd?define(["exports","module","lodash","wires-metal"],t):"undefined"!=typeof exports&&"undefined"!=typeof module&&t(exports,module,require("lodash"),require("wires-metal"))}(function(t,e,n,i){"use strict";function s(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var s in n)t[e].apply(t,[s,n[s]].concat(i));return!1}if(c.test(n)){for(var r=n.split(c),o=0,l=r.length;l>o;o++)t[e].apply(t,[r[o]].concat(i));return!1}return!0}function r(t,e){var n,i=-1,s=t.length,r=e[0],o=e[1],l=e[2];switch(e.length){case 0:for(;++i<s;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<s;)(n=t[i]).callback.call(n.ctx,r);return;case 2:for(;++i<s;)(n=t[i]).callback.call(n.ctx,r,o);return;case 3:for(;++i<s;)(n=t[i]).callback.call(n.ctx,r,o,l);return;default:for(;++i<s;)(n=t[i]).callback.apply(n.ctx,e);return}}var o=function(t){return t&&(t["default"]||t)},l=o(n),a=i.Mixin,c=/\s+/,f=new a({on:function(t,e,n){if(!s(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function h(t,e,n){if(!s(this,"once",t,[e,n])||!e)return this;var i=this,h=l.once(function(){i.off(t,h),e.apply(this,arguments)});return h._callback=e,this.on(t,h,n)},off:function(t,e,n){if(!this._events||!s(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(var i=t?[t]:l.keys(this._events),r=0,o=i.length;o>r;r++){t=i[r];var a=this._events[t];if(a)if(e||n){for(var c=[],f=0,h=a.length;h>f;f++){var u=a[f];(e&&e!==u.callback&&e!==u.callback._callback||n&&n!==u.context)&&c.push(u)}c.length?this._events[t]=c:delete this._events[t]}else delete this._events[t]}return this},trigger:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];if(!this._events)return this;if(!s(this,"trigger",t,n))return this;var o=this._events[t],l=this._events.all;return o&&r(o,n),l&&r(l,arguments),this},listenTo:function(t,e,n){var i=this._listeningTo||(this._listeningTo={}),s=t._listenId||(t._listenId=l.uniqueId("l"));return i[s]=t,n||"object"!=typeof e||(n=this),t.on(e,n,this),this},listenToOnce:function(t,e,n){if("object"==typeof e){for(var i in e)this.listenToOnce(t,i,e[i]);return this}if(c.test(e)){for(var s=e.split(c),r=0,o=s.length;o>r;r++)this.listenToOnce(t,s[r],n);return this}if(!n)return this;var a=l.once(function(){this.stopListening(t,e,a),n.apply(this,arguments)});return a._callback=n,this.listenTo(t,e,a)},stopListening:function(t,e,n){var i=this._listeningTo;if(!i)return this;var s=!e&&!n;n||"object"!=typeof e||(n=this),t&&((i={})[t._listenId]=t);for(var r in i)t=i[r],t.off(e,n,this),(s||l.isEmpty(t._events))&&delete this._listeningTo[r];return this}});e.exports=f});
//# sourceMappingURL=wires-events.min.js.map